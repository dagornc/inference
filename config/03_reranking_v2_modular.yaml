# =============================================================================
# √âTAPE 03 v2 : RERANKING AVANC√â - CONFIGURATION MODULAIRE
# =============================================================================
# Configuration avec activation/d√©sactivation GRANULAIRE de chaque sous-√©tape.
#
# NOUVEAUT√â v2.1 :
# - Section MASTER CONFIG : activer/d√©sactiver chaque √©tape facilement
# - FLAGS GRANULAIRES : contr√¥le fin de chaque feature
# - PRESETS : configurations pr√©d√©finies (minimal, balanced, maximal, legacy_v1)
# - Matrice de d√©pendances : validation automatique
# - Mode debug : logging d√©taill√© de chaque √©tape
# =============================================================================

# =============================================================================
# ‚öôÔ∏è MASTER CONFIGURATION - ACTIVATION/D√âSACTIVATION GRANULAIRE
# =============================================================================
# Activer/d√©sactiver individuellement chaque sous-√©tape ET chaque feature.
# Changez simplement true/false pour activer/d√©sactiver.
#
# ATTENTION : Certaines √©tapes ont des d√©pendances (voir matrice ci-dessous)
# =============================================================================

step_03_config:
  # ---------------------------------------------------------------------------
  # MODE DE CONFIGURATION
  # ---------------------------------------------------------------------------
  # Options : "preset", "custom"
  # - "preset" : utilise un preset pr√©d√©fini (voir section presets)
  # - "custom" : configuration manuelle via les flags ci-dessous
  mode: "preset"

  # Preset √† utiliser si mode="preset"
  # Options : "minimal", "balanced", "maximal", "legacy_v1"
  preset: "balanced"

  # ---------------------------------------------------------------------------
  # FLAGS D'ACTIVATION GRANULAIRE (utilis√©s si mode="custom")
  # ---------------------------------------------------------------------------

  # [3.1] Query-Document Feature Engineering
  step_3_1_features:
    enabled: true                          # ‚≠ê Recommand√©
    lexical_features: true                 # Term overlap, BM25, TF-IDF
    semantic_features: true                # Embedding similarity
    structural_features: true              # Doc length, position
    metadata_features: true                # Domain, temporal, language match
    store_features: true                   # Stocker pour 3.6, 3.10

  # [3.2] Contextualization
  step_3_2_context:
    enabled: true                          # ‚≠ê Recommand√©
    document_context: true                 # [Metadata] + Texte
    query_context: true                    # [Type|Intent] + Query
    hybrid_context: false                  # Query + Doc (optionnel)

  # [3.3] Pr√©r√©ranking
  step_3_3_prererank:
    enabled: true                          # ‚≠ê‚≠ê Important
    single_method: true                    # ColBERT/MiniLM/BGE-small
    ensemble_method: false                 # Multiple prererankers (optionnel)
    adaptive_top_k: true                   # Adapter top_k selon complexity

  # [3.4] Cross-Encoder Reranking
  step_3_4_cross_encoder:
    enabled: true                          # ‚≠ê‚≠ê‚≠ê OBLIGATOIRE
    contextualized_input: true             # Utilise 3.2 (recommand√©)
    adaptive_batching: true                # Batching intelligent
    score_normalization: true              # Normaliser scores

  # [3.5] LLM Reranking
  step_3_5_llm:
    enabled: false                         # ‚ö†Ô∏è D√©sactiv√© par d√©faut (+4-6s)
    method: "listwise"                     # pointwise/pairwise/listwise
    conditional_activation: true           # Activer si query complexe
    cache_enabled: true                    # Cache responses

  # [3.6] Hybrid Reranking Fusion
  step_3_6_hybrid:
    enabled: false                         # ‚ö†Ô∏è D√©sactiv√© par d√©faut (co√ªt)
    reranker_bge: true                     # BGE-reranker-v2-m3
    reranker_cohere: false                 # Cohere Rerank (API payante)
    reranker_jina: false                   # jina-reranker (API)
    fusion_method: "weighted_sum"          # weighted_sum/RRF/learned

  # [3.7] Score Calibration
  step_3_7_calibration:
    enabled: true                          # ‚≠ê Recommand√©
    method: "temperature_scaling"          # temperature/platt/isotonic
    apply_to_all: true                     # Calibrer tous scores

  # [3.8] Adaptive Filtering
  step_3_8_filtering:
    enabled: true                          # ‚≠ê Recommand√©
    adaptive_thresholds: true              # Seuils selon query
    adaptive_top_k: true                   # Top-k selon query
    confidence_filtering: true             # Filtrer si confidence faible

  # [3.9] Diversification & Deduplication
  step_3_9_diversity:
    enabled: true                          # ‚≠ê‚≠ê Important
    mmr: true                              # Maximal Marginal Relevance
    mmr_use_features: true                 # MMR avec features 3.1
    source_coverage: true                  # Multi-sources
    temporal_diversity: false              # Varier p√©riodes (optionnel)
    deduplication: true                    # √âliminer doublons
    near_duplicate_detection: true         # Doublons subtils

  # [3.10] Quality Validation & Metrics
  step_3_10_validation:
    enabled: true                          # ‚≠ê‚≠ê‚≠ê OBLIGATOIRE
    coverage_check: true                   # Couvrir query aspects
    confidence_check: true                 # Scores suffisamment √©lev√©s
    diversity_check: true                  # Vari√©t√© sources
    compute_metrics: true                  # nDCG, precision, recall, MRR
    export_prometheus: false               # Export Prometheus (optionnel)

# =============================================================================
# üì¶ PRESETS DE CONFIGURATION
# =============================================================================
# Configurations pr√©d√©finies pour d√©marrage rapide.
# S√©lectionner via : step_03_config.mode="preset" et step_03_config.preset="..."
# =============================================================================

presets:
  # ---------------------------------------------------------------------------
  # PRESET : minimal (Quick Start)
  # ---------------------------------------------------------------------------
  # Configuration minimale pour d√©marrage rapide.
  # Gains : +12% qualit√©
  # Latence : 330ms
  # Effort : 1 semaine impl√©mentation
  # Use case : FAQ, Support Client, Latence critique
  # ---------------------------------------------------------------------------
  minimal:
    description: "Configuration minimale - Quick Start"
    latency_target_ms: 330
    quality_gain_estimate: "+12%"

    enabled_steps:
      step_3_1_features:
        enabled: false                     # D√©sactiv√© (latence)

      step_3_2_context:
        enabled: true                      # ‚úÖ Contextualization light
        document_context: true
        query_context: false               # D√©sactiv√©
        hybrid_context: false

      step_3_3_prererank:
        enabled: true
        single_method: true                # ‚úÖ ColBERT seulement
        ensemble_method: false
        adaptive_top_k: true

      step_3_4_cross_encoder:
        enabled: true                      # ‚úÖ BGE-reranker
        contextualized_input: true
        adaptive_batching: true
        score_normalization: true

      step_3_5_llm:
        enabled: false                     # D√©sactiv√© (trop lent)

      step_3_6_hybrid:
        enabled: false                     # D√©sactiv√© (co√ªt)

      step_3_7_calibration:
        enabled: true                      # ‚úÖ Temperature scaling
        method: "temperature_scaling"
        apply_to_all: true

      step_3_8_filtering:
        enabled: true                      # ‚úÖ Adaptive filtering
        adaptive_thresholds: true
        adaptive_top_k: true
        confidence_filtering: false

      step_3_9_diversity:
        enabled: true                      # ‚úÖ MMR + Dedup
        mmr: true
        mmr_use_features: false
        source_coverage: true
        temporal_diversity: false
        deduplication: true
        near_duplicate_detection: false

      step_3_10_validation:
        enabled: true                      # ‚úÖ Validation minimale
        coverage_check: true
        confidence_check: false
        diversity_check: false
        compute_metrics: false
        export_prometheus: false

  # ---------------------------------------------------------------------------
  # PRESET : balanced (Recommand√©)
  # ---------------------------------------------------------------------------
  # Configuration √©quilibr√©e qualit√©/latence/effort.
  # Gains : +30% qualit√©
  # Latence : 360ms
  # Effort : 2-3 semaines impl√©mentation
  # Use case : Recherche entreprise, Intranet, E-commerce
  # ---------------------------------------------------------------------------
  balanced:
    description: "Configuration √©quilibr√©e - Recommand√© pour production"
    latency_target_ms: 360
    quality_gain_estimate: "+30%"

    enabled_steps:
      step_3_1_features:
        enabled: true                      # ‚úÖ Feature engineering
        lexical_features: true
        semantic_features: true
        structural_features: true
        metadata_features: true
        store_features: true

      step_3_2_context:
        enabled: true                      # ‚úÖ Contextualization compl√®te
        document_context: true
        query_context: true                # ‚úÖ Activ√©
        hybrid_context: false

      step_3_3_prererank:
        enabled: true
        single_method: true
        ensemble_method: false             # D√©sactiv√© (latence)
        adaptive_top_k: true

      step_3_4_cross_encoder:
        enabled: true
        contextualized_input: true         # ‚úÖ Utilise 3.2
        adaptive_batching: true
        score_normalization: true

      step_3_5_llm:
        enabled: false                     # D√©sactiv√© (trop lent)
        # Pourrait √™tre activ√© conditionnellement

      step_3_6_hybrid:
        enabled: false                     # D√©sactiv√© (co√ªt)
        # Pourrait √™tre activ√© avec budget

      step_3_7_calibration:
        enabled: true                      # ‚úÖ Calibration
        method: "temperature_scaling"
        apply_to_all: true

      step_3_8_filtering:
        enabled: true                      # ‚úÖ Adaptive filtering
        adaptive_thresholds: true
        adaptive_top_k: true
        confidence_filtering: true         # ‚úÖ Activ√©

      step_3_9_diversity:
        enabled: true                      # ‚úÖ Diversification compl√®te
        mmr: true
        mmr_use_features: true             # ‚úÖ MMR avec features
        source_coverage: true
        temporal_diversity: false
        deduplication: true
        near_duplicate_detection: true     # ‚úÖ Activ√©

      step_3_10_validation:
        enabled: true                      # ‚úÖ Validation compl√®te
        coverage_check: true
        confidence_check: true             # ‚úÖ Activ√©
        diversity_check: true              # ‚úÖ Activ√©
        compute_metrics: true              # ‚úÖ Activ√©
        export_prometheus: true            # ‚úÖ Prometheus

  # ---------------------------------------------------------------------------
  # PRESET : maximal (SOTA)
  # ---------------------------------------------------------------------------
  # Configuration maximale pour qualit√© optimale.
  # Gains : +50% qualit√©
  # Latence : 4600ms (si LLM toujours) ou 800ms (si LLM conditionnel)
  # Effort : 2-3 mois impl√©mentation
  # Use case : Recherche acad√©mique, Legal, Medical, Qualit√© primordiale
  # ---------------------------------------------------------------------------
  maximal:
    description: "Configuration maximale - SOTA"
    latency_target_ms: 800  # Avec LLM conditionnel
    quality_gain_estimate: "+50%"

    enabled_steps:
      step_3_1_features:
        enabled: true                      # ‚úÖ Feature engineering complet
        lexical_features: true
        semantic_features: true
        structural_features: true
        metadata_features: true
        store_features: true

      step_3_2_context:
        enabled: true                      # ‚úÖ Contextualization maximale
        document_context: true
        query_context: true
        hybrid_context: true               # ‚úÖ Activ√©

      step_3_3_prererank:
        enabled: true
        single_method: false
        ensemble_method: true              # ‚úÖ Ensemble prereranking
        adaptive_top_k: true

      step_3_4_cross_encoder:
        enabled: true
        contextualized_input: true
        adaptive_batching: true
        score_normalization: true

      step_3_5_llm:
        enabled: true                      # ‚úÖ LLM reranking activ√©
        method: "listwise"
        conditional_activation: true       # ‚úÖ Conditionnel (queries complexes)
        cache_enabled: true

      step_3_6_hybrid:
        enabled: true                      # ‚úÖ Hybrid fusion activ√©
        reranker_bge: true
        reranker_cohere: true              # ‚úÖ Cohere activ√©
        reranker_jina: false               # Optionnel
        fusion_method: "learned"           # ‚úÖ Learned fusion

      step_3_7_calibration:
        enabled: true
        method: "platt"                    # ‚úÖ Platt scaling (meilleur)
        apply_to_all: true

      step_3_8_filtering:
        enabled: true
        adaptive_thresholds: true
        adaptive_top_k: true
        confidence_filtering: true

      step_3_9_diversity:
        enabled: true
        mmr: true
        mmr_use_features: true
        source_coverage: true
        temporal_diversity: true           # ‚úÖ Activ√©
        deduplication: true
        near_duplicate_detection: true

      step_3_10_validation:
        enabled: true
        coverage_check: true
        confidence_check: true
        diversity_check: true
        compute_metrics: true
        export_prometheus: true

  # ---------------------------------------------------------------------------
  # PRESET : legacy_v1 (Backward Compatible)
  # ---------------------------------------------------------------------------
  # Configuration identique √† la v1 pour compatibilit√©.
  # Gains : Baseline (0%)
  # Latence : 310ms
  # Use case : Migration progressive, A/B testing
  # ---------------------------------------------------------------------------
  legacy_v1:
    description: "Configuration v1 - Backward compatible"
    latency_target_ms: 310
    quality_gain_estimate: "Baseline (0%)"

    enabled_steps:
      step_3_1_features:
        enabled: false                     # ‚ùå N'existe pas en v1

      step_3_2_context:
        enabled: false                     # ‚ùå N'existe pas en v1

      step_3_3_prererank:
        enabled: true                      # ‚úÖ Existe en v1
        single_method: true
        ensemble_method: false
        adaptive_top_k: false              # Pas adaptatif v1

      step_3_4_cross_encoder:
        enabled: true                      # ‚úÖ BGE (comme v1)
        contextualized_input: false        # Pas contextualis√© v1
        adaptive_batching: false
        score_normalization: true

      step_3_5_llm:
        enabled: false                     # ‚ùå N'existe pas en v1

      step_3_6_hybrid:
        enabled: false                     # ‚ùå N'existe pas en v1

      step_3_7_calibration:
        enabled: false                     # ‚ùå N'existe pas en v1

      step_3_8_filtering:
        enabled: false                     # ‚ùå N'existe pas en v1

      step_3_9_diversity:
        enabled: true                      # ‚úÖ Existe en v1
        mmr: true                          # ‚úÖ MMR existe v1
        mmr_use_features: false            # Pas features v1
        source_coverage: true
        temporal_diversity: false
        deduplication: true                # ‚úÖ Dedup existe v1
        near_duplicate_detection: false

      step_3_10_validation:
        enabled: false                     # ‚ùå Validation minimale v1
        # M√©triques calcul√©es mais pas de validation

# =============================================================================
# üìä MATRICE DE D√âPENDANCES
# =============================================================================
# Certaines √©tapes d√©pendent d'autres. Cette section documente les d√©pendances.
# Le syst√®me validera automatiquement la configuration au d√©marrage.
# =============================================================================

dependencies:
  # Si vous activez une √©tape avec d√©pendances, les d√©pendances doivent √™tre activ√©es aussi

  step_3_2_context.query_context:
    requires:
      - "Phase 01: step_1_1_query_understanding"  # Besoin query type/intent
    warning: "Query context n√©cessite query understanding Phase 01"

  step_3_3_prererank.adaptive_top_k:
    requires:
      - "Phase 01: step_1_1_query_understanding.complexity_scoring"
    warning: "Adaptive top-k n√©cessite complexity score Phase 01"

  step_3_4_cross_encoder.contextualized_input:
    requires:
      - step_3_2_context                         # Besoin contextualization
    warning: "Contextualized input n√©cessite √©tape 3.2"

  step_3_5_llm.conditional_activation:
    requires:
      - "Phase 01: step_1_1_query_understanding"  # Besoin complexity/type
    optional:
      - step_3_4_cross_encoder                   # Pour threshold top-1 score

  step_3_6_hybrid.fusion_method_learned:
    requires:
      - step_3_1_features                        # Besoin features pour learned fusion
      - "Donn√©es labellis√©es (10K+ queries)"
    warning: "Learned fusion n√©cessite features et donn√©es training"

  step_3_8_filtering.adaptive_thresholds:
    requires:
      - "Phase 01: step_1_1_query_understanding"  # Besoin query type/complexity
    warning: "Adaptive filtering n√©cessite query understanding Phase 01"

  step_3_9_diversity.mmr_use_features:
    requires:
      - step_3_1_features                        # Besoin features extracted
    warning: "MMR with features n√©cessite √©tape 3.1"

  step_3_10_validation.compute_metrics:
    requires:
      - "Relevance labels (ground truth)"
    warning: "M√©triques n√©cessitent relevance judgments"

# =============================================================================
# üîç VALIDATION DE CONFIGURATION
# =============================================================================
# Validation automatique au d√©marrage pour d√©tecter configurations invalides.
# =============================================================================

validation:
  enabled: true                                  # Valider config au d√©marrage

  # Comportement si d√©pendances manquantes
  # Options : "error" (bloquer), "warn" (avertir), "auto_fix" (corriger auto)
  on_missing_dependency: "warn"

  # Comportement si configuration incoh√©rente
  on_invalid_config: "error"

  # Checks √† effectuer
  checks:
    - "check_dependencies"                       # V√©rifier d√©pendances
    - "check_model_availability"                 # V√©rifier mod√®les t√©l√©charg√©s
    - "check_api_keys"                           # V√©rifier API keys (si hybrid/LLM)
    - "check_latency_budget"                     # V√©rifier budget latence r√©aliste

# =============================================================================
# üêõ MODE DEBUG
# =============================================================================
# Logging d√©taill√© de chaque sous-√©tape pour debugging.
# =============================================================================

debug:
  enabled: false                                 # D√©sactiver en production

  # Niveau de logging
  # Options : "DEBUG", "INFO", "WARNING", "ERROR"
  log_level: "DEBUG"

  # Logger chaque sous-√©tape individuellement
  log_substeps: true

  # Inclure donn√©es interm√©diaires dans les logs
  include_intermediate_data: true

  # Inclure scores interm√©diaires (top-10 par reranker)
  include_intermediate_scores: true

  # Dur√©e max acceptable par sous-√©tape (alertes si d√©pass√©)
  latency_alerts:
    step_3_1: 20                                 # Feature engineering
    step_3_2: 15                                 # Contextualization
    step_3_3: 60                                 # Prereranking
    step_3_4: 350                                # Cross-encoder
    step_3_5: 5000                               # LLM (tr√®s lent)
    step_3_6: 150                                # Hybrid fusion
    step_3_7: 10                                 # Calibration
    step_3_8: 10                                 # Adaptive filtering
    step_3_9: 40                                 # Diversification
    step_3_10: 15                                # Validation

# =============================================================================
# üíæ CONFIGURATION D√âTAILL√âE DES SOUS-√âTAPES
# =============================================================================
# Configuration fine de chaque sous-√©tape (identique √† 03_reranking_v2.yaml)
# Ces param√®tres sont utilis√©s si l'√©tape est activ√©e via master config
# =============================================================================

# [3.1] Query-Document Feature Engineering
feature_engineering:
  lexical_features:
    term_overlap: {method: "jaccard", normalize: true}
    bm25_score: {params: {k1: 1.5, b: 0.75}}
    tfidf_similarity: {enabled: true}

  semantic_features:
    embedding_similarity: {model: "BAAI/bge-m3", method: "cosine"}

  structural_features:
    doc_length: {normalize: true}
    original_rank: {normalize: true}

  metadata_features:
    domain_match: {boost_factor: 1.1}
    temporal_match: {boost_factor: 1.15, tolerance_days: 365}
    language_match: {boost_factor: 1.05}

# [3.2] Contextualization
contextualization:
  document_context:
    metadata_fields: ["title", "author", "date", "domain", "source"]
    template: "[{metadata}] {text}"
    max_length: 512

  query_context:
    add_query_type: true
    add_query_intent: true
    template: "[{type}|{intent}] {query}"

# [3.3] Pr√©r√©ranking
prereranking:
  single_method:
    tool: "ragatouille"
    model: "colbert-ir/colbertv2.0"
    input_top_k: 100
    output_top_k: 50

  ensemble_method:
    methods:
      - {name: "colbert", tool: "ragatouille", weight: 0.6}
      - {name: "minilm", tool: "sentence_transformers", weight: 0.4}

  adaptive_top_k:
    by_complexity: {simple: 30, medium: 50, complex: 70}

# [3.4] Cross-Encoder Reranking
cross_encoder:
  provider: "sentence_transformers"
  model: "BAAI/bge-reranker-v2-m3"
  input_top_k: 50
  output_top_k: 20
  batch_size: 8
  normalize_scores: true
  min_score_threshold: 0.4

# [3.5] LLM Reranking
llm_reranking:
  provider: "ollama"
  model: "llama3"
  method: "listwise"
  input_top_k: 10
  output_top_k: 10
  temperature: 0.0

  conditional_activation:
    min_complexity: 0.7
    query_types: ["analytical", "comparative"]
    max_top1_score: 0.8

# [3.6] Hybrid Reranking Fusion
hybrid_fusion:
  rerankers:
    - {name: "bge", provider: "sentence_transformers", weight: 0.5}
    - {name: "cohere", provider: "cohere", weight: 0.3}
    - {name: "jina", provider: "jina", weight: 0.2}
  fusion_method: "weighted_sum"

# [3.7] Score Calibration
score_calibration:
  method: "temperature_scaling"
  temperature_scaling: {temperature: 1.5}

# [3.8] Adaptive Filtering
adaptive_filtering:
  adaptive_thresholds:
    by_complexity: {simple: 0.5, medium: 0.6, complex: 0.7}
    by_query_type: {factual: 0.65, analytical: 0.6}

  adaptive_top_k:
    by_complexity: {simple: 5, medium: 10, complex: 15}

# [3.9] Diversification & Deduplication
diversification:
  mmr: {lambda: 0.6, use_features: true}
  source_coverage: {max_chunks_per_source: 3, min_unique_sources: 3}

deduplication:
  similarity_threshold: 0.90
  near_duplicate_detection: {threshold: 0.85}

# [3.10] Quality Validation & Metrics
quality_validation:
  coverage_check: {min_coverage: 0.7}
  confidence_check: {min_avg_confidence: 0.7}
  diversity_check: {min_unique_sources: 3}

metrics:
  compute_metrics: ["ndcg@5", "ndcg@10", "precision@5", "recall@10", "mrr"]
  export: {format: "prometheus"}

# =============================================================================
# üìù NOTES D'UTILISATION
# =============================================================================
#
# D√âMARRAGE RAPIDE :
#
# 1. Mode Preset (Recommand√©) :
#    - Changez : step_03_config.mode = "preset"
#    - S√©lectionnez : step_03_config.preset = "minimal" | "balanced" | "maximal"
#
# 2. Mode Custom (Contr√¥le granulaire) :
#    - Changez : step_03_config.mode = "custom"
#    - Activez/d√©sactivez : step_03_config.step_3_X
#    - Configurez finement chaque feature
#
# EXEMPLES :
#
# # Exemple 1 : Quick Start (minimal)
# step_03_config:
#   mode: "preset"
#   preset: "minimal"
#
# # Exemple 2 : Production (balanced)
# step_03_config:
#   mode: "preset"
#   preset: "balanced"
#
# # Exemple 3 : Custom (activer seulement contextualization + cross-encoder)
# step_03_config:
#   mode: "custom"
#   step_3_1_features: {enabled: false}
#   step_3_2_context: {enabled: true, document_context: true, query_context: true}
#   step_3_3_prererank: {enabled: true, single_method: true}
#   step_3_4_cross_encoder: {enabled: true, contextualized_input: true}
#   step_3_5_llm: {enabled: false}
#   step_3_6_hybrid: {enabled: false}
#   step_3_7_calibration: {enabled: true}
#   step_3_8_filtering: {enabled: true}
#   step_3_9_diversity: {enabled: true}
#   step_3_10_validation: {enabled: true}
#
# CONTR√îLE GRANULAIRE AVANC√â :
#
# # Activer LLM reranking UNIQUEMENT pour queries complexes
# step_03_config:
#   step_3_5_llm:
#     enabled: true
#     conditional_activation: true  # ‚Üê Active seulement si complexity > 0.7
#
# # Activer hybrid fusion avec seulement BGE + Cohere
# step_03_config:
#   step_3_6_hybrid:
#     enabled: true
#     reranker_bge: true
#     reranker_cohere: true
#     reranker_jina: false  # ‚Üê D√©sactiver jina
#
# # Activer MMR avec features
# step_03_config:
#   step_3_9_diversity:
#     enabled: true
#     mmr: true
#     mmr_use_features: true  # ‚Üê Utilise features de 3.1
#
# OPTIMISATION PAR USE CASE :
#
# - FAQ/Support Client : preset="minimal" (330ms, +12%)
# - Recherche Entreprise : preset="balanced" (360ms, +30%)
# - Recherche Acad√©mique : preset="maximal" (800ms, +50%)
# - E-commerce : custom (contextualization + adaptive filtering)
#
# =============================================================================
